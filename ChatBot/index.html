<!DOCTYPE html>
<style>
body { font-family: Arial; background:#0f172a; color:#fff; }
#chat { max-width:800px; margin:40px auto; }
.message { padding:10px; margin:10px 0; border-radius:8px; }
.user { background:#2563eb; }
.ai { background:#334155; }
textarea { width:100%; height:80px; }
button { padding:10px 20px; margin-top:10px; }
</style>
</head>
<body>
<div id="chat">
<h2>AI Chat Tool</h2>
<div id="messages"></div>
<textarea id="input" placeholder="Ask anything..."></textarea>
<button onclick="sendMessage()">Send</button>
</div>


<script>
const messages = [];


async function sendMessage() {
const input = document.getElementById("input");
const text = input.value.trim();
if (!text) return;


messages.push({ role: "user", content: text });
render();
input.value = "";


const res = await fetch("/api/chat", {
method: "POST",
headers: { "Content-Type": "application/json" },
body: JSON.stringify({ messages })
});


const data = await res.json();
const reply = data.choices[0].message.content;


messages.push({ role: "assistant", content: reply });
render();
}


function render() {
const container = document.getElementById("messages");
container.innerHTML = "";
messages.forEach(m => {
const div = document.createElement("div");
div.className = `message ${m.role === "user" ? "user" : "ai"}`;
div.innerText = m.content;
container.appendChild(div);
});
}
</script>
</body>
</html>